data_slide2 <- data_slide2[, -c(2, 21, 33)]
glimpse(data_slide1)
glimpse(data_slide2)
data_slide1
colnames(data_slide1)
data1[,15] <- as.numeric(str_replace_all(data1[,15], "<1", "0.5"))
data_slide1[,15] <- as.numeric(str_replace_all(data_slide1[,15], "<1", "0.5"))
data_slide1[,15]
data_slide1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 1, na = ".")
data_slide2 <- read_excel("TMAdata_format_slide2 with our parameters.xlsx", sheet = 1, na = ".")
# Renaming/Removing conflicting columns between slide1 and slide2
data_slide1 <- data_slide1[, -2] %>% rename(TMAID = TMA_ID)
data_slide2 <- data_slide2[, -c(2, 21, 33)]
View(data_slide1)
data_slide1[,15] <- as.numeric(str_replace_all(data_slide1[,15], "<1", "0.5"))
View(data_slide1)
data_slide1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 1, na = ".")
data_slide2 <- read_excel("TMAdata_format_slide2 with our parameters.xlsx", sheet = 1, na = ".")
# Renaming/Removing conflicting columns between slide1 and slide2
data_slide1 <- data_slide1[, -2] %>% rename(TMAID = TMA_ID)
data_slide2 <- data_slide2[, -c(2, 21, 33)]
data_slide1[,15]
str_replace_all(data_slide1[,15], "<1", "0.5")
numeric(str_replace_all(data_slide1[,15], "<1", "0.5"))
as.numeric(str_replace_all(data_slide1[,15], "<1", "0.5"))
str(data_slide1[,15])
str(data_slide2[,15])
str(data_slide1[,25])
str(data_slide2[,25])
str(as.character(data_slide2[,25]))
str(data_slide1[,30])
str(data_slide2[,30])
as.character(data_slide2[,25])
as.character(data_slide2[,30])
View(data_slide2)
data_slide2[,25] <- as.character(data_slide2[,25])
data_slide2[,30] <- as.character(data_slide2[,30])
View(data_slide2)
rm(list = ls())
data_slide1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 1, na = ".")
data_slide2 <- read_excel("TMAdata_format_slide2 with our parameters.xlsx", sheet = 1, na = ".")
data_slide1 <- data_slide1[, -2] %>% rename(TMAID = TMA_ID)
data_slide2 <- data_slide2[, -c(2, 21, 33)]
full_join(data_slide1, data_slide2)
data_slide1[25]
data_slide2[25]
str_replace_all(data_slide2[25], "<1", "0.5")
str_replace_all(data_slide2[,25], "<1", "0.5")
as.numeric(str_replace_all(data_slide2[25], "<1", "0.5"))
numeric(str_replace_all(data_slide2[25], "<1", "0.5"))
as.numeric(str_replace_all(data_slide2[,25], "<1", "0.5"))
as.numeric(str_replace_all(data_slide2[,25], "<1", 0.5))
numeric(str_replace_all(data_slide2[,25], "<1", 0.5))
str_replace_all(data_slide2[,25], "<1", 0.5)
str_replace(data_slide2[,25], "<1", 0.5)
str_replace(data_slide2[,25], "<1", "0.5")
str_replace(data_slide2["FOXP3 % tumor positivity"], "<1", "0.5")
str_replace(data_slide2[,"FOXP3 % tumor positivity"], "<1", "0.5")
data_slide1
data_slide1 <- data_slide1[, -2] %>% rename(TMAID = TMA_ID)
colnames(data_slide1) <- colnames(data1) %>%
str_replace_all(" ", "") %>%
str_replace_all("#", "") %>%
str_replace_all("%", "") %>%
str_replace_all("0-3", "") %>%
str_replace_all("/hpf", "") %>%
str_replace_all("\\+", "") %>%
str_replace_all("/K", "K")
colnames(data_slide1) <- colnames(data_slide1) %>%
str_replace_all(" ", "") %>%
str_replace_all("#", "") %>%
str_replace_all("%", "") %>%
str_replace_all("0-3", "") %>%
str_replace_all("/hpf", "") %>%
str_replace_all("\\+", "") %>%
str_replace_all("/K", "K")
data_slide1
data_slide1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 1, na = ".")
data_slide2 <- read_excel("TMAdata_format_slide2 with our parameters.xlsx", sheet = 1, na = ".")
# Renaming/Removing conflicting columns between slide1 and slide2
data_slide1 <- data_slide1[, -2] %>% rename(TMAID = TMA_ID)
data_slide2 <- data_slide2[, -c(2, 21, 33)]
for i in (data_slide1, data_slide2){
for (i in c(data_slide1, data_slide2)){
colnames(i) <- colnames(i) %>%
str_replace_all(" ", "") %>%
str_replace_all("#", "") %>%
str_replace_all("%", "") %>%
str_replace_all("0-3", "") %>%
str_replace_all("/hpf", "") %>%
str_replace_all("\\+", "") %>%
str_replace_all("/K", "K")
}
View(data_slide1)
colnames(data_slide1) <- colnames(data_slide1) %>%
str_replace_all(" ", "") %>%
str_replace_all("#", "") %>%
str_replace_all("%", "") %>%
str_replace_all("0-3", "") %>%
str_replace_all("/hpf", "") %>%
str_replace_all("\\+", "") %>%
str_replace_all("/K", "K")
colnames(data_slide2) <- colnames(data_slide2) %>%
str_replace_all(" ", "") %>%
str_replace_all("#", "") %>%
str_replace_all("%", "") %>%
str_replace_all("0-3", "") %>%
str_replace_all("/hpf", "") %>%
str_replace_all("\\+", "") %>%
str_replace_all("/K", "K")
data_slide1
data_slide2
data_slide1$PDL1inflm
str_replace(data_slide1$PDL1inflm, "<1", "0.5")
as.numeric(str_replace(data_slide1$PDL1inflm, "<1", "0.5"))
data_slide1$PDL1inflm <- as.numeric(str_replace(data_slide1$PDL1inflm, "<1", "0.5"))
data_slide1$FOXP3tumorpositivity
str_replace(data_slide1$FOXP3tumorpositivity, "<1", "0.5")
as.numeric(str_replace(data_slide1$FOXP3tumorpositivity, "<1", "0.5"))
data_slide1$FOXP3tumorpositivity <- as.numeric(str_replace(data_slide1$FOXP3tumorpositivity, "<1", "0.5"))
data_slide1$Ki67oftumor <- as.numeric(
str_replace(data_slide1$Ki67oftumor, "<1", "0.5"))
data_slide1
glimpse(data_slide1)
glimpse(data_slide2)
data_slide2$PDL1inflm <- as.numeric(
str_replace(data_slide2$PDL1inflm, "<1", "0.5"))
glimpse(data_slide2)
full_join(data_slide1, data_slide2)
data1 <- full_join(data_slide1, data_slide2)
View(data1)
source('~/.active-rstudio-document', echo=TRUE)
data1
View(data1)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
data1$PDL1_tumor_location
factor(data1$PDL1_tumor_location, levels(
"1" = "Cytoplasmic"
))
factor(data1$PDL1_tumor_location, levels(
1 = "Cytoplasmic"
))
factor(data1$PDL1_tumor_location, levels = c(
1 = "Cytoplasmic"
))
factor(data1$PDL1_tumor_location, levels = c(
"1" = "Cytoplasmic"
))
factor(data1$PDL1_tumor_location)
factor(data1$PDL1_tumor_location, labels = c("1" = "Cytoplasmic"))
factor(data1$PDL1_tumor_location, levels = c("1" = "Cytoplasmic"))
?factor
factor(data1$PDL1_tumor_location, levels(c(
"1" = "Cytoplasmic"))
factor(data1$PDL1_tumor_location, levels("1" = "Cytoplasmic"))
factor(data1$PDL1_tumor_location)
factor(data1$PDL1_tumor_location, levels = c("Cytoplasmic", "Cytoplasmic/Membranous"))
as.factor(data1$PDL1_tumor_location, levels = c("Cytoplasmic", "Cytoplasmic/Membranous"))
factor(data1$PDL1_tumor_location)
factor(data1$PDL1_tumor_location, labels = c(
"1" = "Cytoplasmic"
))
factor(data1$PDL1_tumor_location, labels = c(
"1" = "Cytoplasmic",
"3" = "Cytoplasmic/Membranous"
))
factor(data1$PDL1_tumor_location, labels = c(
"1" = "Cytoplasmic",
"2" = "Membranous",
"3" = "Cytoplasmic/Membranous"
))
factor(data1$PDL1_tumor_location, levels= c("1", "2", "3"), labels = c(
"1" = "Cytoplasmic",
"2" = "Membranous",
"3" = "Cytoplasmic/Membranous"
))
source('~/.active-rstudio-document', echo=TRUE)
glimpse(data1)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
str(TMAID)
str(data1$TMAID)
table(data1$TMAID)
summary(data1$PDL1_tumor)
str(data1$PDL1_tumor)
source('~/.active-rstudio-document', echo=TRUE)
str(data1$PDL1_Stroma)
str(data1$PDL1_stroma)
str(data1$PDL1_stroma_location)
table(data1$PDL1_stroma_location)
source('~/.active-rstudio-document', echo=TRUE)
table(data1$Granulomas)
source('~/.active-rstudio-document', echo=TRUE)
str(data1$Host_response)
table(data1$Host_response)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
table(data1$FOXP3_lymph_intensity)
source('~/.active-rstudio-document', echo=TRUE)
table(data1$FOXP3_tumor_intensity)
table(data1$FOXP3_tumor_positive)
table(data1$FOXP3_tumor)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
data_clinical2 <- read_excel("TMAdata_format_slide2 with our parameters.xlsx", sheet = 2, na = ".")
View(data_clinical1)
View(data_clinical1)
data_clinical1[,c(1:20)]
data_clinical1 <- data_clinical1[,c(1:20)]
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:20)] %>% filter(!is.na(TMA))
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:20, -14)] %>% filter(!is.na(TMA))
data_clinical1 <- data_clinical1[,c(1:13, 15:20)] %>% filter(!is.na(TMA))
data_clinical1 <- data_clinical1[,c(1:13, 15:20)]
data_clinical1
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:13,15:20)]
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:13,15)]
View(data_clinical1)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
data_clinical1 <- data_clinical1[,c(1:13)]
View(data_clinical1)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
data_clinical1 <- data_clinical1[,c(1:13,15)]
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:13,15:17)]
View(data_clinical1)
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:13, 15:17)]
View(data_clinical1)
selected_columns <- c(1:13)
selected_columns
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
View(data_clinical1)
selected_columns <- c(1:13, 15:20)
selected_columns
data_clinical1 <- data_clinical1[,selected_columns]
View(data_clinical1)
View(data_clinical1)
data_clinical1 <- data_clinical1[,c(1:20)]
View(data_clinical1)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
data_clinical1 <- data_clinical1[,c(1:20)]
View(data_clinical1)
data_clinical1 <- data_clinical1[,-c(14)]
View(data_clinical1)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
data_clinical1a <- data_clinical1[,c(1:13)]
View(data_clinical1a)
data_clinical1b <- data_clinical1[,c(15:20)]
View(data_clinical1b)
data_clinical1 <- read_excel("TMAdata_format_slide1 with our parameters.xlsx", sheet = 2, na = ".")
View(data_clinical1)
source('~/.active-rstudio-document', echo=TRUE)
View(data_clinical1)
data_clinica1 <- data_clinica1[,(1:20)]
data_clinical1 <- data_clinical1[,(1:20)]
View(data_clinical1)
View(data_clinical2)
data_clinical2 <- data_clinical2[,(1:20)]
View(data_clinical1)
data_clinical1 <- data_clinical1[,-c(14,16)]
data_clinical2 <- data_clinical2[,-c(14,16)]
View(data_clinical1)
source('~/.active-rstudio-document', echo=TRUE)
View(data_clinical1)
source('~/.active-rstudio-document', echo=TRUE)
data_clean <- read_excel("utuc clinical data cleaned.xlsx")
View(data_clean)
data_clean <- data_clean[,1:36]
View(data_clean)
data_clean <- data_clean[,1:36] %>% arrange(TMA)
View(data_clean)
data_clean <- data_clean[,1:36] %>%
data_clean[,-34] %>%
arrange(TMA)
View(data_clean)
data_clean <- data_clean[,1:36]
data_clean <- data_clean[,-34]
arrange(data_clean, TMA)
View(data_clean)
data_clean <- data_clean %>% arrange(data_clean, TMA)
data_clean <- read_excel("utuc clinical data cleaned.xlsx")
data_clean <- data_clean[,1:36]
data_clean <- data_clean[,-34]
data_clean <- data_clean %>% arrange(TMA)
View(data_clean)
View(data_clinical1)
data_clean[1,3]
data_clean[1,34]
data_clean[1,34] - data_clean[1,3]
(data_clean[1,34] - data_clean[1,3])/30
View(data_clean)
?lubridate
install.packages(c("Rcpp", "tidyr"))
(data_clean[1,34] - data_clean[1,3])/30
(data_clean[1,34] - data_clean[1,3])/emonth
(data_clean[1,34] - data_clean[1,3])/emonths
(data_clean[1,34] - data_clean[1,3])/emonths()
(data_clean[1,34] - data_clean[1,3])/emonths(1)
library(lubridate)
(data_clean[1,34] - data_clean[1,3])/emonths(1)
(data_clean[1,34] - data_clean[1,3])/months(1)
interval(data_clean[1,34] - data_clean[1,3])
interval(data_clean[1,34], data_clean[1,3])
interval(data_clean[1,34], data_clean[1,3])/edays(1)
interval(data_clean[1,3], data_clean[1,34])/edays(1)
interval(data_clean[1,3], data_clean[1,34])/emonths(1)
interval(data_clean[1,3], data_clean[1,34])/months(1)
interval(data_clean[1,3], data_clean[1,34])/months()
interval(data_clean[1,3], data_clean[1,34])/months(2)
interval(data_clean[1,3], data_clean[1,34])/months(1)
interval(data_clean[,3], data_clean[,34])/months(1)
interval(data_clean[,3], data_clean[,34])
interval(data_clean[,3], data_clean[,34])/months()
interval(data_clean[,3], data_clean[,34])/months(1)
(data_clean[,34] - data_clean[,3])
data_clean[,34]$month
data_clean[,34]
(data_clean[,34] - data_clean[,3])
(data_clean[,34] - data_clean[,3])/months(1)
(data_clean[,34] - data_clean[,3])/edays(1)
(data_clean[,34] - data_clean[,3])/ddays(1)
(data_clean[,34] - data_clean[,3])/ddays(30)
(data_clean[,34] - data_clean[,3])/dmonths(1)
(data_clean[,34] - data_clean[,3])/emonths(1)
(data_clean[,34] - data_clean[,3])/months(1)
as.duration((data_clean[,34] - data_clean[,3]))/months(1)
as.period(data_clean[,34] - data_clean[,3])
as.period(data_clean[,34] - data_clean[,3], units = c("month"))
as.period(data_clean[,34] - data_clean[,3])
month(as.period(data_clean[,34] - data_clean[,3]))
as.period(data_clean[,34] - data_clean[,3])/month(1)
as.duration(data_clean[,34] - data_clean[,3])
(data_clean[,34] - data_clean[,3])
interval(data_clean[,34], data_clean[,3])
interval(data_clean[,34], data_clean[,3])/months(1)
data_clean <- data_clean %>% arrange(TMA) %>% filter(!is.na(TMA))
source('~/.active-rstudio-document', echo=TRUE)
interval(data_clean[,34], data_clean[,3])/months(1)
library(lubridate)
interval(data_clean[,34], data_clean[,3])
interval(data_clean[,34], data_clean[,3])/months(1)
data_clean[,34]
data_clean[,3]
interval(data_clean[,34], data_clean[,3])
source('~/.active-rstudio-document', echo=TRUE)
View(data_clean)
data_clean[,34]
interval(ymd(data_clean[,34]), ymd(data_clean[,3]))
ymd(data_clean[,34])
data_clean[,34]
ymd(data_clean[,34])
data_clean[,34]
library(lubridate)
ymd(data_clean[,34])
data_clean[,34], data_clean[,3]
interval(data_clean[,34], data_clean[,3])
interval(data_clean[,3], data_clean[,34])
(data_clean[,34] - data_clean[,3])
interval(data_clean[,34] - data_clean[,3])
interval(data_clean[,34], data_clean[,3])
as.Date(data_clean[,34])
(data_clean[,34] - data_clean[,3])
(data_clean[,34] - data_clean[,3])/months(1)
interval(data_clean[,34], data_clean[,3])
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
data_clean[,34]
data_clean[,34] - data_clean[,3]
(data_clean[,34] - data_clean[,3])/30
source('~/.active-rstudio-document', echo=TRUE)
(data_clean[,34] - data_clean[,3])/months(1)
library(lubridate)
(data_clean[,34] - data_clean[,3])/months(1)
as.duration(data_clean[,34] - data_clean[,3])
as.duration(data_clean[,34], data_clean[,3])
as.duration(data_clean[,34] - data_clean[,3])
data_clean[,34]
(data_clean[,34] - data_clean[,3])
as.period(data_clean[,34] - data_clean[,3])
as.period(data_clean[,34] - data_clean[,3], units = "month")
?"as.period"
interval(data_clean[,34], data_clean[,3])
?POSIXct
interval(as.POSIXct(data_clean[,34]), as.POSIXct(data_clean[,3]))
as.POSIXct(data_clean[,34])
as.POSIXct(data_clean[,34])
POSIXct(data_clean[,34])
Date(data_clean[,34])
as.Date(data_clean[,34])
View(data_clean)
interval(data_clean[,34], POSIXct(data_clean[,3])
interval(data_clean[,34], POSIXct(data_clean[,3]))
interval(data_clean[,34], data_clean[,3])
difftime(data_clean[,34], data_clean[,3])
difftime(data_clean[,34] - data_clean[,3])
library(lubridate)
class(data_clean[,34])
ymd(data_clean[,34])
data_clean[,34]
source('~/.active-rstudio-document', echo=TRUE)
View(data_clinical1)
data_clinical <- full_join(data_clinical1, data_clinical2)
View(data_clinical)
colnames(data_clinical1)
colnames(data_clinical2)
data_clinical1 <- data_clinical1[,-c(14,16)] %>% filter(!is.na(TMA))
data_clinical2 <- data_clinical2[,-c(14,16)] %>% filter(!is.na(TMA))
data_clinical <- full_join(data_clinical1, data_clinical2)
View(data_clinical)
source('~/.active-rstudio-document', echo=TRUE)
View(data_clinical)
View(data_clinical)
View(data1)
source('~/.active-rstudio-document', echo=TRUE)
data1 %>% group_by(TMAID) %>% summarize(PDL1_tumor_mean = mean(PDL1_tumor))
data1 %>%
group_by(TMAID) %>%
summarize(
PDL1_tumor_mean = mean(PDL1_tumor),
PDL1_tumor_max = max(PDL1_tumor)
)
data1 %>%
group_by(TMAID) %>%
summarize(
PDL1_tumor_mean = mean(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_max = max(PDL1_tumor, na.rm = TRUE)
)
View(data1)
data1 %>%
group_by(TMAID) %>%
summarize(
PDL1_tumor_mean = mean(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_max = max(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_location = max(PDL1_tumor_location)
)
data1 %>%
group_by(TMAID) %>%
summarize(
PDL1_tumor_mean = mean(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_max = max(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_location = PDL1_tumor_location
)
data1 %>%
group_by(TMAID) %>%
summarize(
PDL1_tumor_mean = mean(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_max = max(PDL1_tumor, na.rm = TRUE),
PDL1_tumor_location = max(as.numeric(PDL1_tumor_location))
)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
t.test(data_PDL1$PDL1_tumor_mean, data_PDL1$PDL1_tumor_median)
t.test(data_PDL1$PDL1_tumor_mean, data_PDL1$PDL1_tumor_median, paired = TRUE)
t.test(data_PDL1$PDL1_tumor_mean, data_PDL1$PDL1_tumor_max, paired = TRUE)
t.test(data_PDL1$PDL1_tumor_median, data_PDL1$PDL1_tumor_max, paired = TRUE)
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1)
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1_tumor)
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1_tumor)
shapiro.test(data1$PDL1_tumor)
shapiro.test(data1$PDL1_H_tumor)
shapiro.test(data1$PDL1_H)
shapiro.test(log(data1$PDL1_tumor + 1))
shapiro.test(log(data1$PDL1_tumor))
shapiro.test(scale(data1$PDL1_tumor))
shapiro.test(data1$PDL1_tumor)
?shapiro.test
View(data_PDL1_tumor)
View(data2)
View(data1)
View(data_PDL1_tumor)
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1_tumor)
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1_tumor)
View(data2)
View(data2)
data2 <- data2[, -c(1,3,13)]
source('~/.active-rstudio-document', echo=TRUE)
View(data_PDL1_tumor)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source("https://raw.githubusercontent.com/alcideschaux/R-gplots/master/gplots.R")
dget("PDL1_Tumor.Rd")
source("PDL1_Tumor.Rd")
dget("PDL1_tumor.Rd")
data <- dget("PDL1_tumor.Rd")
View(data)
gbox(PDL1_median, gender, origin = data)
View(gbox)
View(gbox)
summary(data$PDL1_median)
hist(data$PDL1_median)
hist(log(data$PDL1_median))
hist(log10(data$PDL1_median))
data <- dget("PDL1_tumor.Rd")
data
dget("PDL1_tumor.Rd")
table(data$gender)
